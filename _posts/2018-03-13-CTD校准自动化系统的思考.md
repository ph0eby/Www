---
layout: post
title: CTD校准自动化系统的思考
date: 2018-03-13
categories: blog
tags: [CTD,calibration,Automation,自动化，校准]
description: 20180313晚上睡觉之前琢磨了一下关于使用python出具校准报告的自动化问题，结果一直也没睡着。躺在床上40分钟没睡着，索性就起来写点东西。下面就我所理解的部分进行输出。该版本就得到持续的更新。
---

> 20180313晚上睡觉之前琢磨了一下关于使用python出具校准报告的自动化问题，结果一直也没睡着。躺在床上40分钟没睡着，索性就起来写点东西。下面就我所理解的部分进行输出。该版本就得到持续的更新

## 目的
我考虑这一部分的工作，并不是为了和谁抢功，只是觉得这个事应该这样去做会更佳好。利用这个过程，解决一个重要的系统问题，可以给自己博士毕业（也许）做一个好的作品；更重要的是通过编程在工作实践中的应用解决了实际问题，也提高了自己的能力，为日后更高的目标打下基础。

## 自动化的内涵
这里提到的自动化是指整个闭环系统流程的尽可能的自动化（智能化）。首先来分析这个闭环系统的模块和要素，整个闭环系统分为如下部分：

- 客户咨询：流程的咨询、价格咨询、校准进度咨询。

- 客户委托：填写相关的资料（客户信息、样品信息）。

- 接收样品：将待校仪器接收到实验室，查看相关软硬件资料，安置好。转填写相关信息入系统。

- 实验预备：将待校仪器在实验室调试好，具体包括：线、接口、软件匹配-直读式的调节到可以直接读取数据-自容式的调节到至时间后自动记录数据、建立相关文件夹存储实验数据信息、将设备转移到海水中。

- 温盐实验：按照程序对恒温海水槽子进行“降温-恒温”操作，依次搞出35～0的稳定的8个温度点的温度场。每到1个温度点之后，等待温度稳定（0.001度？）后，连续3分钟读取这些在线温度传感器度温度数据并保存到相应仪器到文件夹下。同时要保存铂电阻温度计，在该温度点到标准温度序列值。通常也同时获取了CTD仪器到盐度（或电导率）的数据，有时候也包含温度传感器的频率T-N和电导率传感器的频率值C-N。一般是若干个COM口链接了若干台被校仪器，最终的产品是：标准温度（8个txt文件）+N个仪器的文件（每个文件至少包含8个温度点的实测数据，大部分时候也有8个盐度／电导率的被校仪器实测数据，以及TN和CN值）。该过程往往需要一整天的时间。最大的问题是：到了某个温度点之后不能自动稳定，而是需要人工干预，大概到达某个温度点后手动停止泵或开启泵（目前正在改造升级）。
注意：1.在做每个温度点实验的时候，需要拿一个海水瓶子取这个温度点对应的海水，这瓶海水将会用高精度盐度计测量，其数值做为该温度点时海水的盐度标准值（电导率标准值）；2.注意按照程序填写3本操作记录——形式主义多一些。
当天还需要完成：1.取数——也就是说从自容式的仪器中将数据取出并存到相应的文件夹下；同时将其他在线取样的数据，归拢到一个文件夹下，拷贝出来，存到办公室里的一台电脑里，做为温盐的原始数据存下来，等待将来使用；2.清洗仪器——当天做完仪器最好当天捞出来并用自来水冲洗；3.转移仪器——将做完温盐实验的设备转移到压力实验室（如果需要）。

- 温度实验收尾：通常包括：清洗仪器——当天做完仪器最好当天捞出来并用自来水冲洗；3.转移仪器——将做完温盐实验的设备转移到压力实验室（如果需要）。如果上述工作在第一天没做的话，这需要第二天早上来进行，如果完成的顺利的话，这一步就省略了。将“标准温度记录表”复印若干份放到公共的文件夹下，将其原件放到穆的文件夹下。
- 盐度试验：将做温度试验时接出的8瓶水，用8400B 实验室盐度计测量出来，按照制式的格式表填写好，得到8个点的标准盐度值和电导率值。

- 压力试验：将做完温度试验剩下的仪器设备拿到恒温恒湿实验室，准备做压力试验。压力试验：根据送检方的委托单，看到有测量压力（深度）的要求，就安装好相应的接口，准备连接标准压力装置，对其进行校准。一方面，要学会使用连接件连接好仪器的压力接口；另一方面，使用电脑相关软件与被校准仪器的电信号接口连接好，通过软件读取仪器的压力数据。另外就是要学会使用压力标准装置（一共有4台）。
- 从进门左手边顺时针数，四台压力标准装置的基本情况是：
  - 1号机为全手动-双活塞压力计操作：5米(3.92米)-6000米（0.05~6；1~60MPa），优点是工作的时候不用单独换活塞，快，缺点是稳定性略差，颜值低；
  - 2号机器为半自动，量程为 20米-10000米（0.2-11MPa；2MP-110MPa），优点是颜值高、稳定，缺点是量程不同要换活塞（放油、排气、调选面积等）；
  - 3号机为半自动，气体，量程到7MPa（700m）；
  - 4号机为全自动，油压+气压，量程到88MPa（8800m）。
  - 5号机为 FLuke 不需要砝码的，{参数待补充}，现在知道的是这个家伙不用搬动砝码，机器等待培训。
  > 一般我们做的时候超过5000m 量程的，我们都只给他做到5000米，超过5000米我们不给他做，这样是有风险的。于建清实验室有一个是可以测1~25米。

## 出校准证书：

>出证书需要如下几个条件：证书号（人工或自动获取）、被校准仪器对应的“委托单信息”、纸质的标准温度记录表、纸质的标准盐度（电导率）记录表、纸质的压力记录表；另需要 被校准仪器当天的“标准温度”文件夹、被校准仪器的原始温度盐度数据、被校准仪器的压力数据。被校准仪器的证书模版。出具“证书”。

   - 被校准仪器各个温度盐度点有效数据的获取：
   - 数据处理：温度、盐度、压力数据的处理——有些需要另外配套软件的进一步处理。
   - 将处理好的数据黏贴到证书模版中，根据有效数据，并对系列文件（数据处理xls、电子原始数据表doc、证书doc、不确定度xls、不确定度doc）等进行格式化处理。
   - 校准证书的校对。
   - 上交校准证书，并走证书发布程序（由另外部门执行）。
> 如果这边进入猪，那边就能出来香肠就好了。这个工作看来还是需要我来做，做出来也主要是我来用，至少帮助自己从崩溃的堆积如山的证书出具任务中解放出来。

## 其他单元

### 标准器的溯源

### 标准器的期间核查

### 测量系统的维护保养



## LOG
2018-03-13 深夜创建本文件。
